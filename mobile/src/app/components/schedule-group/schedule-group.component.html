<div class="schedule-section">
    <!-- Simplified Header: Only show if collapsible or title is significant -->
    <div class="section-header" *ngIf="section.title !== 'Next Up'" (click)="toggleCollapse()">
        <h2 class="section-title">{{ section.title }}</h2>
        <!-- <ion-badge color="medium">{{ section.appointments.length }}</ion-badge> -->
        <ion-icon *ngIf="section.isCollapsible" [name]="collapsed ? 'chevron-down' : 'chevron-up'"
            class="collapse-icon">
        </ion-icon>
    </div>

    <div class="section-content" *ngIf="!collapsed">
        <!-- Loop for items -->
        <ng-container *ngFor="let reservation of section.appointments">

            <!-- Priority Card Case: Section is "Next Up" -->
            <app-priority-event-card *ngIf="section.title === 'Next Up'" [reservation]="reservation"
                [eventName]="getEventName(reservation.event_id)" [venue]="getEventVenue(reservation.event_id)"
                (onCheckIn)="onCheckIn($event)">
            </app-priority-event-card>

            <!-- Standard Row Case -->
            <app-event-row *ngIf="section.title !== 'Next Up'" [reservation]="reservation"
                [eventName]="getEventName(reservation.event_id)" [venue]="getEventVenue(reservation.event_id)"
                (onCancel)="onCancel($event)" (onReschedule)="onReschedule($event)">
            </app-event-row>

        </ng-container>

        <div *ngIf="section.appointments.length === 0" class="empty-section">
            <p>No reservations</p>
        </div>
    </div>
</div>